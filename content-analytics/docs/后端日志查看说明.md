# åç«¯æ—¥å¿—æŸ¥çœ‹è¯´æ˜

## å½“å‰åç«¯æœåŠ¡çŠ¶æ€

âœ… **åç«¯æœåŠ¡æ­£åœ¨è¿è¡Œ**
- **ç«¯å£**: 8088
- **è¿›ç¨‹ID**: 1724
- **çŠ¶æ€**: LISTENINGï¼ˆç›‘å¬ä¸­ï¼‰

## æŸ¥çœ‹åç«¯æ—¥å¿—çš„æ–¹æ³•

### æ–¹æ³•1: æŸ¥çœ‹è¿è¡ŒæœåŠ¡çš„ç»ˆç«¯çª—å£
åç«¯æœåŠ¡é€šå¸¸åœ¨å‰ç«¯æˆ–åå°ç»ˆç«¯çª—å£ä¸­è¿è¡Œï¼Œæ—¥å¿—ä¼šç›´æ¥è¾“å‡ºåˆ°è¯¥ç»ˆç«¯ã€‚

**æŸ¥æ‰¾è¿è¡Œåç«¯æœåŠ¡çš„ç»ˆç«¯**ï¼š
- æŸ¥çœ‹æ‰€æœ‰æ‰“å¼€çš„ç»ˆç«¯/å‘½ä»¤è¡Œçª—å£
- æ‰¾åˆ°è¿è¡Œ `python run.py` æˆ– `uvicorn` çš„çª—å£
- æ—¥å¿—ä¼šå®æ—¶æ˜¾ç¤ºåœ¨è¯¥çª—å£ä¸­

**å…¸å‹æ—¥å¿—å†…å®¹**ï¼š
```
INFO:     Started server process
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:8088
[analyses] Celery task triggered for analysis xxx
[analyses] Background analysis completed for xxx
```

### æ–¹æ³•2: é€šè¿‡APIæŸ¥è¯¢åˆ†æä»»åŠ¡çŠ¶æ€

ç”±äºåç«¯æœåŠ¡æ­£åœ¨è¿è¡Œï¼Œæ‚¨å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼æŸ¥çœ‹åˆ†æä»»åŠ¡çŠ¶æ€ï¼š

#### é€‰é¡¹A: ä½¿ç”¨æµè§ˆå™¨
1. è®¿é—®å‰ç«¯é¡µé¢: http://localhost:5173
2. ç™»å½•ç³»ç»Ÿ
3. è¿›å…¥ã€Œåˆ†æä»»åŠ¡ã€é¡µé¢
4. æŸ¥çœ‹ä»»åŠ¡çŠ¶æ€å’Œè¿›åº¦

#### é€‰é¡¹B: ä½¿ç”¨APIï¼ˆéœ€è¦tokenï¼‰
```bash
# 1. ç™»å½•è·å–token
curl -X POST http://localhost:8088/api/v1/auth/login \
  -H "Content-Type: application/json" \
  -d '{"username":"admin","password":"admin123"}'

# 2. ä½¿ç”¨tokenæŸ¥è¯¢åˆ†æä»»åŠ¡
curl -X GET http://localhost:8088/api/v1/analyses \
  -H "Authorization: Bearer YOUR_TOKEN"
```

### æ–¹æ³•3: æŸ¥çœ‹è¿›ç¨‹è¾“å‡ºï¼ˆå¦‚æœæœåŠ¡åœ¨åå°è¿è¡Œï¼‰

å¦‚æœåç«¯æœåŠ¡åœ¨åå°è¿è¡Œï¼ˆå¦‚ä½¿ç”¨nohupæˆ–screenï¼‰ï¼Œæ—¥å¿—å¯èƒ½åœ¨ï¼š
- `nohup.out` æ–‡ä»¶
- screenä¼šè¯çš„æ—¥å¿—
- ç³»ç»Ÿæ—¥å¿—

## åˆ†æä»»åŠ¡çŠ¶æ€è¯´æ˜

åˆ†æä»»åŠ¡æœ‰ä»¥ä¸‹çŠ¶æ€ï¼š

- **pending** (â³ ç­‰å¾…ä¸­) - ä»»åŠ¡å·²åˆ›å»ºï¼Œç­‰å¾…æ‰§è¡Œ
- **analyzing** (ğŸ”„ æ•°æ®åˆ†æä¸­) - æ­£åœ¨æ‰§è¡Œæ•°æ®åˆ†æ
- **ai_processing** (ğŸ¤– AIåˆ†æä¸­) - æ­£åœ¨æ‰§è¡ŒAIåˆ†æ
- **completed** (âœ… å·²å®Œæˆ) - ä»»åŠ¡å®Œæˆ
- **failed** (âŒ å¤±è´¥) - ä»»åŠ¡å¤±è´¥

## å½“å‰çŠ¶æ€æŸ¥è¯¢

æ ¹æ®ä¹‹å‰çš„æµ‹è¯•ï¼š
- åç«¯æœåŠ¡æ­£å¸¸è¿è¡Œ âœ…
- ç«¯å£8088æ­£åœ¨ç›‘å¬ âœ…
- æœ‰å¤šä¸ªTIME_WAITè¿æ¥ï¼ˆè¯´æ˜æœ‰æ´»åŠ¨ï¼‰

**å»ºè®®**ï¼š
1. æ£€æŸ¥è¿è¡Œåç«¯æœåŠ¡çš„ç»ˆç«¯çª—å£æŸ¥çœ‹å®æ—¶æ—¥å¿—
2. æˆ–è®¿é—®å‰ç«¯é¡µé¢æŸ¥çœ‹åˆ†æä»»åŠ¡çŠ¶æ€
3. å¦‚æœçœ‹ä¸åˆ°ç»ˆç«¯çª—å£ï¼Œå¯èƒ½éœ€è¦é‡æ–°å¯åŠ¨åç«¯æœåŠ¡å¹¶æŸ¥çœ‹è¾“å‡º

## å¸¸è§æ—¥å¿—å†…å®¹

### æ•°æ®åˆ†æä»»åŠ¡æ—¥å¿—
```
[analyses] Celery task triggered for analysis {analysis_id}
[analyses] Background analysis completed for {analysis_id}
```

### AIåˆ†æä»»åŠ¡æ—¥å¿—
```
[analyses] Celery AI task triggered for analysis {analysis_id}
[analyses] Background AI analysis completed for {analysis_id}
AIåˆ†æå¤±è´¥ (result_id=xxx): {error_message}
```

### é”™è¯¯æ—¥å¿—
```
[analyses] Background analysis failed for {analysis_id}: {error}
è¯¦ç»†é”™è¯¯: {traceback}
```

---

**æœ€åæ›´æ–°**: 2026-01-03

